<!DOCTYPE html>
<html>
<head>
	<title>90 Degree Game-COBALINTASAN</title>
</head>
<body>
	<canvas id="mycanvas"></canvas>
	<script src="js/lib/require.js" ></script>
	<script type="text/javascript">
	let app,lastKey=0;
	let game={};
	require(["js/lib/pixi.min"],function(PIXI){
			app=new PIXI.Application({
			width:360,
			height:640,
			antialias:true,
			transparent:true
		});
		game.app=app;
		document.body.appendChild(app.view);
		init();
	});
	function init() {
		app.loader
			.add("centerline","assets/center_lin.png")
			.add("garis-pembatas","assets/garis_v.png")
			.add("marker","assets/mark.png")
			.load(setup);
	}

	function setup(loader,resource) {
		const 	TilingSprite=PIXI.extras.TilingSprite,
				view=game.app.view,
				stage=game.app.stage,
				ticker=game.app.ticker,
				Graphics=PIXI.Graphics;
		let centerline=new PIXI.extras.TilingSprite(resource["centerline"].texture,view.width,view.height);
		centerline.anchor.set(0.5,0.5);
		centerline.position.set(view.width/2,view.height/2);
		centerline.tileScale.set(0.30,0.30);
		centerline.tilePosition.x=50;
		stage.addChild(centerline);

		let marka={};
		marka.kanan=new PIXI.extras.TilingSprite(resource["marker"].texture,50,view.height);
		marka.kanan.tileScale.set(-0.30,0.30);
		marka.kanan.position.x=314;
		stage.addChild(marka.kanan);
		marka.kiri=new PIXI.extras.TilingSprite(resource["marker"].texture,50,view.height);
		marka.kiri.tileScale.set(0.30,0.30);
		marka.kiri.position.x=-13;
		stage.addChild(marka.kiri);

		let pembatas={};
		pembatas.kanan=new PIXI.extras.TilingSprite(resource["garis-pembatas"].texture,loader.resources["garis-pembatas"].texture.width/3,loader.resources["garis-pembatas"].texture.height/3);
		pembatas.kanan.position.x=305;
		pembatas.kiri=new PIXI.extras.TilingSprite(resource["garis-pembatas"].texture,loader.resources["garis-pembatas"].texture.width/3,loader.resources["garis-pembatas"].texture.height/3);
		pembatas.kiri.position.x=30;
		stage.addChild(pembatas.kanan);
		stage.addChild(pembatas.kiri);

		let mask=new Graphics();
		mask.beginFill(0xff0000);
		mask.drawRect(0,0,270,app.view.height);
		mask.position.x=45;
		centerline.mask=mask;

		game.resource={};
		game.resource.centerline=centerline;
		game.resource.marka=marka;
		game.resource.pembatas=pembatas;

		ticker.add(loop);
	}
	function loop(){
		game.resource.centerline.tilePosition.y++;
		game.resource.pembatas.kiri.tilePosition.y++;
		game.resource.pembatas.kanan.tilePosition.y++;
		game.resource.centerline.tilePosition.y++;
		game.resource.marka.kiri.tilePosition.y++;
		game.resource.marka.kanan.tilePosition.y++;
	}
	</script>
</body>
</html>